.. _FGM:

SU2 DataMiner Configuration for FGM 
===================================

.. contents:: :depth: 2


The following functions are used to access the options used specifically for FGM applications in *SU2 DataMiner*. 


Reaction Mechanism and Transport Model 
--------------------------------------

For Cantera flamelet calculations, a chemical kinetics model and a diffusion model have to be provided. Installation of Cantera comes with several popular chemical kinetics models such as *gri30*, but 
custom kinetics files can be used, as long as they are accessible from the current file location. An error will be raised if the provided kinetics file cannot be accessed.

.. autofunction:: Common.DataDrivenConfig.Config_FGM.SetReactionMechanism


.. autofunction:: Common.DataDrivenConfig.Config_FGM.GetReactionMechanism


1D chemistry simulations in Cantera can be performed with two options for the multi-component diffusion model: "unity-Lewis" or "multicomponent". 
When selecting "multicomponent", species diffusion fluxes are calculated using the Fick diffusion law, so the effects of differential and preferential diffusion are modeled. 
These effects are relevant in lean, premixed hydrogen flames. For flames where preferential and differential diffusion are less relevant, as is the case for methane-air flames for example,
the "unity-Lewis" option is more appropriate. With the option "unity-Lewis", the diffusion coefficient of all species is equal to the thermal diffusivity.

Preferential diffusion will automatically be enabled within the configuration when selecting the "multicomponent" transport model. For more information on the settings regarding the preferential diffusion model, see :ref:`this section <PREFDIF_SETTINGS>`.


.. autofunction:: Common.DataDrivenConfig.Config_FGM.SetTransportModel 


.. autofunction:: Common.DataDrivenConfig.Config_FGM.GetTransportModel 


Flamelet Types 
--------------

*SU2 DataMiner* currently supports the generation of adiabatic flamelets (free flames), burner-stabilized flamelets, and chemical equilibrium data. 
Details on the setup for each type of flamelet simulation can be found :ref:`on this page <FLAMELETDATA>`.
Adiabatic flamelets are one-dimensional detailed chemistry solutions of premixed reactants without strain. More information about adiabatic flame simulations can be found on the 
`this web page <https://cantera.org/dev/python/onedim.html#freeflame>`_. Information on whether adiabatic flamelets are included in the manifold can be accessed through the following options.

.. autofunction:: Common.DataDrivenConfig.Config_FGM.RunFreeFlames 


.. autofunction:: Common.DataDrivenConfig.Config_FGM.GenerateFreeFlames 


Burner-stabilized flamelets are one-dimensional detailed chemistry solutions of non-adiabatic flat flames. 
They differ from adiabatic flames by the inflow condition, which is modeled as a porous medium which acts as a heat sink. More information about burner-stabilized flame simulations in Cantera can be found on the `Cantera web page <https://cantera.org/dev/python/onedim.html#burnerflame>`_.
By reducing the flow rate, the total enthalpy is reduced, enabling the generation of thermochemical data over a wide range of enthalpy.
This is particularly useful when modeling non-adiabatic flames with FGM simulations or cooling flows over heat exchangers. 
Information on the inclusion of burner-stabilized flamelets in the manifold can be accessed through the following options.


.. autofunction:: Common.DataDrivenConfig.Config_FGM.RunBurnerFlames


.. autofunction:: Common.DataDrivenConfig.Config_FGM.GenerateBurnerFlames 


The final type of data in the manifold supported by *SU2 DataMiner* is chemical equilibrium data. 
Chemical equilibrium data are generated by calculating thermochemical fluid properties of the premixed reactants and equilibrated reaction products 
for specific mixtures over a range of temperatures and enthalpy. These data are used to calculate the physics-informed penalty terms while training ML-FGM networks and 
populate the manifold in high-progress variable, low enthalpy regions. The following options provide information on whether chemical equilibrium data are included in the manifold.


.. autofunction:: Common.DataDrivenConfig.Config_FGM.RunEquilibrium


.. autofunction:: Common.DataDrivenConfig.Config_FGM.GenerateEquilibrium


Flamelet Manifold Resolution 
----------------------------

.. autofunction:: Common.DataDrivenConfig.Config_FGM.SetMixtureBounds 

.. autofunction:: Common.DataDrivenConfig.Config_FGM.GetMixtureBounds 

.. autofunction:: Common.DataDrivenConfig.Config_FGM.SetNpMix 

.. autofunction:: Common.DataDrivenConfig.Config_FGM.GetNpMix 

.. autofunction:: Common.DataDrivenConfig.Config_FGM.SetUnbTempBounds

.. autofunction:: Common.DataDrivenConfig.Config_FGM.GetUnbTempBounds

.. autofunction:: Common.DataDrivenConfig.Config_FGM.SetNpTemp

.. autofunction:: Common.DataDrivenConfig.Config_FGM.GetNpTemp 

    
FGM Controlling Variables 
-------------------------


.. autofunction:: Common.DataDrivenConfig.Config_FGM.SetControllingVariables


.. autofunction:: Common.DataDrivenConfig.Config_FGM.GetControllingVariables
    

.. autofunction:: Common.DataDrivenConfig.Config_FGM.SetProgressVariableDefinition 


.. autofunction:: Common.DataDrivenConfig.Config_FGM.GetProgressVariableSpecies 


.. autofunction:: Common.DataDrivenConfig.Config_FGM.GetProgressVariableWeights 


.. autofunction:: Common.DataDrivenConfig.Config_FGM.SetDefaultProgressVariable 


.. _PREFDIF_SETTINGS:

Differential Diffusion 
----------------------

Passive Variables 
-----------------


Output Group Management
-----------------------

SU2 Configuration
-----------------






   

References
----------

.. _reluarticle:

Richard H.R Hahnloser et al. “Digital selection and analogue amplification coexist in a cortex-inspired silicon circuit”. In: Nature 405 (June 2000), pp. 947-951.

.. _eluarticle:

Djork-Arné Clevert, Thomas Unterthiner, and Sepp Hochreiter. “Fast and Accurate Deep Network Learning by Exponential Linear Units (ELUs)”. In: (Feb. 2016). URL:http://arxiv.org/abs/1511.07289

.. _geluarticle:

Dan Hendrycks and Kevin Gimpel. “Gaussian Error Linear Units (GELUs)”. In:(June 2023). URL: http://arxiv.org/abs/1606.08415.

.. _canterafreeflames : https://cantera.org/dev/python/onedim.html#freeflame